# ✅ Integration Test Quality Checklist

**목적:**  
AI 또는 사람이 작성한 통합 테스트 코드가  
명세 기반·사용자 중심·유지보수 가능한 수준으로 작성되었는지 평가하기 위한 품질 기준입니다.

---

## 🧭 1. 테스트 의도와 시나리오 일치성

| 항목                       | 설명                                                            | Pass 기준                            | 상태 |
| -------------------------- | --------------------------------------------------------------- | ------------------------------------ | ---- |
| **1.1 Flow 매핑 정확성**   | 각 `it()` 테스트가 입력 문서의 Flow ID/Name과 정확히 대응하는가 | `it('2-1-1 - ...')` 형식으로 ID 일치 |      |
| **1.2 시나리오 재현성**    | 테스트가 Input → Trigger → Output 순서를 따르는가               | 주석/코드로 순서 명시                |      |
| **1.3 비즈니스 의도 일치** | 단순 DOM 확인이 아니라 사용자 행동 결과를 검증하는가            | 클릭 → 렌더링 결과 확인              |      |

---

## 🧩 2. 테스트 구조 및 가독성

| 항목                       | 설명                                                        | Pass 기준                                | 상태 |
| -------------------------- | ----------------------------------------------------------- | ---------------------------------------- | ---- |
| **2.1 구조 계층화**        | Epic → Story → Flow 구조가 `describe` 계층으로 구현되었는가 | `describe('Story') → it('Flow')`         |      |
| **2.2 테스트 이름 명확성** | `it()` 이름이 동작 중심 문장 형태로 되어 있는가             | 예: “반복 일정이 아이콘과 함께 표시된다” |      |
| **2.3 AAA 패턴 분리**      | Arrange / Act / Assert 단계가 구분되어 있는가               | 빈 줄 또는 주석으로 분리                 |      |
| **2.4 중복 제거**          | setup, mock, render 코드가 공통화되어 있는가                | `beforeEach`로 처리                      |      |
| **2.5 주석 품질**          | “무엇을 하는가”보다 “왜 하는가”를 설명하는 주석인가         | 의도 중심 주석만 존재                    |      |

---

## 🧪 3. 테스트 행위(Behavior) 품질

| 항목                            | 설명                                                               | Pass 기준               | 상태 |
| ------------------------------- | ------------------------------------------------------------------ | ----------------------- | ---- |
| **3.1 사용자 이벤트 기반 검증** | `userEvent`로 클릭·입력 등 사용자 행위를 재현했는가                | 직접 DOM 조작 금지      |      |
| **3.2 비동기 안정성 확보**      | `await screen.findBy...` 또는 `waitFor` 사용으로 타이밍 제어했는가 | 즉시 `getBy` 검증 없음  |      |
| **3.3 접근성 선택자 사용**      | `aria-label`, `role`, `alt`, `labelText`로 요소 탐색했는가         | `getByText`만 사용 금지 |      |
| **3.4 상태 변화 검증**          | 내부 state가 아니라 UI 결과를 검증했는가                           | state 직접 참조 없음    |      |
| **3.5 예외/부재 검증 포함**     | 조건부 UI(예: “아이콘 없음”)을 `queryBy`로 검증했는가              | 정상/예외 모두 커버     |      |

---

## 🧱 4. 코드 품질 및 안정성

| 항목                  | 설명                                      | Pass 기준                      | 상태 |
| --------------------- | ----------------------------------------- | ------------------------------ | ---- |
| **4.1 비결정성 제거** | 랜덤값·시간 의존 로직이 없는가            | `Math.random`, `Date.now` 없음 |      |
| **4.2 Mock 일관성**   | mock/stub이 일관된 형태로 정의되어 있는가 | `vi.fn()` 혹은 axios mock 통일 |      |
| **4.3 테스트 독립성** | 테스트 간 전역 상태 공유 없이 동작하는가  | `beforeEach`로 상태 초기화     |      |
| **4.4 Flaky 방지**    | `waitFor` 타임아웃, queryBy로 안정성 확보 | rerun 시 동일 결과             |      |

---

## 🧠 5. 테스트의 명세적 역할 (Kent Beck 기준)

| 항목                   | 설명                                           | Pass 기준                  | 상태 |
| ---------------------- | ---------------------------------------------- | -------------------------- | ---- |
| **5.1 의도 명확성**    | 테스트가 “무엇을 증명하는가” 명확히 드러나는가 | 문서처럼 읽힘              |      |
| **5.2 최소 검증 원칙** | 하나의 테스트가 하나의 결과만 검증하는가       | 독립된 `expect`만 존재     |      |
| **5.3 리팩터링 내성**  | UI 구조 변경에도 검증 의미 유지되는가          | 라벨 기반 검증 사용        |      |
| **5.4 유지보수성**     | 새 Flow 추가 시 구조 확장 용이한가             | Story별 describe 구조 유지 |      |

---

## 🧾 6. 메타 품질 (자동화 평가용)

| 항목                   | 설명                                        | Pass 기준                        | 상태 |
| ---------------------- | ------------------------------------------- | -------------------------------- | ---- |
| **6.1 Flow 커버리지**  | 문서의 모든 Flow가 테스트로 작성되었는가    | 누락된 ID 없음                   |      |
| **6.2 코드 길이 균형** | 각 테스트가 과도하게 길거나 복잡하지 않은가 | 20~40줄 내외                     |      |
| **6.3 실행 안정성**    | 3회 이상 반복 실행 시 동일 결과인가         | flaky rate 0                     |      |
| **6.4 네이밍 일관성**  | 파일명, describe명, it명 패턴 일관성 유지   | `{feature}-integration.spec.tsx` |      |

---

## 📊 평가 요약

| 카테고리            | 가중치 | 평가 포인트                     |
| ------------------- | ------ | ------------------------------- |
| **시나리오 일치성** | 25%    | Flow 재현, 목적 명확            |
| **구조/가독성**     | 20%    | AAA 구조, 네이밍 일관           |
| **행위 품질**       | 25%    | 사용자 이벤트 중심, 접근성 검증 |
| **코드 안정성**     | 15%    | mock 일관성, flaky 방지         |
| **명세로서의 품질** | 15%    | 문서처럼 읽힘, 유지보수성       |

> **총점 100점 중 80점 이상: Good Integration Test  
> 90점 이상: Excellent Integration Test**

---

## 💬 사용 예시

```bash
[✅] Flow ID가 모두 매칭된다 (1.1)
[✅] UI 렌더링 후 findBy로 검증 (3.2)
[✅] 반복 일정 아이콘 aria-label로 검증 (3.3)
[⚠️] queryByText 부재 검증 누락 (3.5)
[✅] beforeEach로 render 공통화 (2.4)
[❌] waitFor 누락 (3.2)
총점: 88점 → Excellent 👍
```
