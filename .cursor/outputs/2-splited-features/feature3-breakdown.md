# Feature 3 Breakdown: 반복 일정 종료 조건

## Epic: 반복 일정 종료 관리

사용자가 반복 일정의 종료 조건을 설정하여 특정 날짜까지만 일정이 생성되도록 제어할 수 있습니다.

---

## Story 1: 반복 종료 조건 설정

**사용자 목표:** 반복 일정이 영구적으로 생성되지 않고, 특정 날짜까지만 생성되도록 종료 조건을 설정하고 싶다.

### Flows

| Flow ID | Name | Input | Trigger | Output | Type | Notes |
|---------|------|-------|---------|--------|------|-------|
| 1-1 | 반복 유형 선택 시 종료 날짜 입력 필드가 표시된다 | 반복 유형 선택 (none 제외) | 반복 유형 드롭다운 변경 | 종료 날짜 입력 필드 표시 | Normal | UI 피드백 |
| 1-2 | 종료 날짜를 입력하고 저장하면 해당 날짜까지만 반복 일정이 생성된다 | 시작 날짜, 반복 유형, 종료 날짜 | 일정 저장 버튼 클릭 | 종료 날짜까지의 반복 일정 생성 | Normal | 핵심 기능 |
| 1-3 | 종료 날짜 미입력 시 기본값(2025-12-31)까지 생성된다 | 시작 날짜, 반복 유형, 종료 날짜 없음 | 일정 저장 버튼 클릭 | 2025-12-31까지 반복 일정 생성 | Normal | 기본 동작 |

---

## Story 2: 반복 종료 조건 검증

**사용자 목표:** 잘못된 종료 날짜 입력을 방지하고, 종료 조건이 정확히 적용되는지 확인하고 싶다.

### Flows

| Flow ID | Name | Input | Trigger | Output | Type | Notes |
|---------|------|-------|---------|--------|------|-------|
| 2-1 | 종료 날짜가 시작 날짜보다 이전이면 에러 메시지가 표시된다 | 시작 날짜: 2025-10-15, 종료 날짜: 2025-10-10 | 일정 저장 버튼 클릭 | "종료 날짜는 시작 날짜 이후여야 합니다" 에러 표시 | Exception | 유효성 검증 |
| 2-2 | 반복 일정이 종료 날짜 다음날부터는 생성되지 않는다 | 시작: 2025-10-01, 매일 반복, 종료: 2025-10-10 | 일정 생성 | 2025-10-01 ~ 2025-10-10만 생성 (10개) | Normal | 경계값 검증 |
| 2-3 | 종료 날짜가 2025-12-31을 초과하면 2025-12-31까지만 생성된다 | 시작: 2025-01-01, 매일 반복, 종료: 2026-01-31 | 일정 생성 | 2025-12-31까지만 생성 | Normal | 최대값 제한 |

---

## Story 3: 종료 날짜 수정 및 표시

**사용자 목표:** 기존 반복 일정의 종료 날짜를 수정하거나, 일정 목록에서 종료 날짜 정보를 확인하고 싶다.

### Flows

| Flow ID | Name | Input | Trigger | Output | Type | Notes |
|---------|------|-------|---------|--------|------|-------|
| 3-1 | 반복 일정 수정 시 기존 종료 날짜가 입력 필드에 표시된다 | 기존 반복 일정 (종료 날짜 포함) | 일정 수정 버튼 클릭 | 기존 종료 날짜가 pre-filled된 폼 표시 | Normal | 수정 기능 |
| 3-2 | 종료 날짜를 수정하면 새로운 종료 날짜가 반영된다 | 기존 종료: 2025-10-31, 수정: 2025-11-30 | 수정 저장 버튼 클릭 | 2025-11-30까지 반복 일정 재생성 | Normal | 수정 반영 |
| 3-3 | 일정 목록에서 반복 일정의 종료 날짜가 표시된다 | 반복 일정 리스트 | 캘린더/목록 렌더링 | "~까지 반복" 텍스트 표시 | Normal | UI 피드백 |

---

## 📊 Summary

- **Epic**: 1개 (반복 일정 종료 관리)
- **Stories**: 3개
  - Story 1: 반복 종료 조건 설정 (3 Flows)
  - Story 2: 반복 종료 조건 검증 (3 Flows)
  - Story 3: 종료 날짜 수정 및 표시 (3 Flows)
- **Total Flows**: 9개
- **Normal Flows**: 8개
- **Exception Flows**: 1개

---

## 🔍 설계 의사결정

### 1. 종료 날짜 기본값을 2025-12-31로 설정한 이유
- PRD에서 "예제 특성상, 2025-12-31까지 최대 일자를 만들어 주세요"라고 명시
- 사용자가 종료 날짜를 입력하지 않아도 무한정 생성되지 않도록 안전장치

### 2. 종료 날짜가 2025-12-31을 초과할 수 없는 이유
- 예제 애플리케이션의 범위 제한
- 성능 최적화 (너무 먼 미래까지 생성 방지)

### 3. 종료 날짜 검증 규칙
- 종료 날짜 >= 시작 날짜 (필수)
- 종료 날짜 <= 2025-12-31 (최대값)
- 미입력 시 자동으로 2025-12-31 적용

### 4. Flow 분리 기준
- 사용자가 직접 종료 날짜를 입력하는 경우 (Flow 1-2)
- 종료 날짜를 입력하지 않는 경우 (Flow 1-3)
- 잘못된 날짜를 입력하는 경우 (Flow 2-1)
- 경계값 검증 (Flow 2-2, 2-3)
- 수정 기능 (Flow 3-1, 3-2)
- UI 표시 (Flow 1-1, 3-3)

---

## ✅ Validation Checklist

- [x] Epic/Story/Flow 테이블이 존재
- [x] 모든 Flow에 Input, Trigger, Output 명시
- [x] Flow 이름이 "<행동> 시 <결과>" 형태
- [x] Normal/Exception Flow 구분
- [x] 사용자 행동 → 시스템 반응 구조
- [x] 테스트 가능한 최소 단위로 분해

