# 🧪 테스트 설계서 - FEATURE4: 반복 일정 수정

## 1. 테스트 목적

반복 일정 수정 기능이 올바르게 동작하는지 검증한다. 사용자가 반복 일정의 수정 아이콘을 클릭했을 때 수정 옵션 다이얼로그가 표시되고, '예'(단일 수정) 또는 '아니오'(전체 수정)를 선택하여 각각 다르게 동작하는지 확인한다. 단일 수정 시에는 해당 일정만 변경되고 반복 아이콘이 사라지며, 전체 수정 시에는 모든 반복 일정이 변경되고 반복 아이콘이 유지되어야 한다.

## 2. 테스트 범위

### 포함

- 반복 일정 수정 아이콘 클릭 시 다이얼로그 표시
- 수정 옵션 다이얼로그에서 '예'/'아니오' 선택
- 단일 수정 모드: 해당 일정만 변경, 반복 아이콘 제거
- 전체 수정 모드: 모든 반복 일정 변경, 반복 아이콘 유지
- 수정 완료 후 토스트 메시지 표시
- 수정 완료 후 캘린더에 반영

### 제외

- 일반 일정 수정 (반복이 아닌 일정)
- 반복 일정 생성 로직 (FEATURE1에서 다룸)
- 반복 일정 삭제 (FEATURE5에서 다룸)

## 3. 테스트 분류

| 구분        | 설명                                       |
| ----------- | ------------------------------------------ |
| 통합 테스트 | 수정 UI, 다이얼로그, 업데이트 로직 간 검증 |

## 4. 테스트 시나리오

### Story 1: 반복 일정 수정 시작

| 시나리오 ID | 설명                                                   | 입력                         | 기대 결과                 | 검증 포인트                         | 테스트 유형 |
| ----------- | ------------------------------------------------------ | ---------------------------- | ------------------------- | ----------------------------------- | ----------- |
| TC-4-1      | 반복 일정 수정 아이콘 클릭 시 다이얼로그가 표시된다    | 반복 일정 수정 아이콘 클릭   | 수정 옵션 다이얼로그 표시 | 다이얼로그가 DOM에 존재하고 visible | 통합        |
| TC-4-2      | 다이얼로그에 '해당 일정만 수정하시겠어요?' 텍스트 표시 | 다이얼로그 열림              | 안내 텍스트 표시          | 다이얼로그 내 해당 텍스트가 존재    | 통합        |
| TC-4-3      | 다이얼로그에 '예'와 '아니오' 버튼이 표시된다           | 다이얼로그 열림              | 두 개의 버튼 표시         | '예', '아니오' 버튼이 모두 존재     | 통합        |
| TC-4-4      | '예' 선택 시 단일 수정 모드가 활성화된다               | 다이얼로그에서 '예' 클릭     | 단일 수정 모드 활성화     | 수정 모드가 'single'로 설정됨       | 통합        |
| TC-4-5      | '아니오' 선택 시 전체 수정 모드가 활성화된다           | 다이얼로그에서 '아니오' 클릭 | 전체 수정 모드 활성화     | 수정 모드가 'all'로 설정됨          | 통합        |

### Story 2: 반복 일정 수정 실행

| 시나리오 ID | 설명                                               | 입력                                        | 기대 결과                        | 검증 포인트                                         | 테스트 유형 |
| ----------- | -------------------------------------------------- | ------------------------------------------- | -------------------------------- | --------------------------------------------------- | ----------- |
| TC-4-6      | 단일 수정 완료 시 해당 일정만 변경된다             | 단일 모드, 제목 수정, 저장                  | 해당 날짜의 일정만 변경됨        | 특정 날짜 일정만 변경되고 다른 반복 일정은 유지됨   | 통합        |
| TC-4-7      | 단일 수정 완료 시 반복 아이콘이 사라진다           | 단일 모드, 제목 수정, 저장                  | 수정된 일정의 반복 아이콘 제거   | 수정된 일정에 🔁 아이콘이 없음                      | 통합        |
| TC-4-8      | 단일 수정 완료 시 다른 반복 일정은 영향받지 않는다 | 단일 모드, 제목 수정, 저장                  | 다른 날짜 반복 일정은 변경 안됨  | 다른 날짜의 일정은 원래 제목과 반복 아이콘 유지     | 통합        |
| TC-4-9      | 전체 수정 완료 시 모든 반복 일정이 변경된다        | 전체 모드, 제목 수정, 저장                  | 모든 반복 일정이 동일하게 변경됨 | 같은 반복 그룹의 모든 일정이 동일한 제목으로 변경됨 | 통합        |
| TC-4-10     | 전체 수정 완료 시 반복 아이콘이 유지된다           | 전체 모드, 제목 수정, 저장                  | 모든 반복 일정의 아이콘 유지     | 모든 일정에 여전히 🔁 아이콘이 존재함               | 통합        |
| TC-4-11     | 전체 수정 시 반복 패턴이 변경된다 (확인 필요)      | 전체 모드, 반복 유형 변경 (매일→매주), 저장 | 확인 필요                        | 확인 필요: 반복 유형 변경 가능 여부                 | 통합        |

### Story 3: 수정 완료 피드백

| 시나리오 ID | 설명                                             | 입력                  | 기대 결과                        | 검증 포인트                                  | 테스트 유형 |
| ----------- | ------------------------------------------------ | --------------------- | -------------------------------- | -------------------------------------------- | ----------- |
| TC-4-12     | 수정 완료 시 '일정이 수정되었습니다' 토스트 표시 | 수정 완료 (단일/전체) | 토스트 메시지 표시               | '일정이 수정되었습니다' 텍스트가 표시됨      | 통합        |
| TC-4-13     | 수정 완료 시 캘린더에 변경사항이 즉시 반영된다   | 수정 완료 (단일/전체) | 캘린더에 수정사항 반영           | 캘린더 뷰에 변경된 일정이 표시됨             | 통합        |
| TC-4-14     | 토스트 메시지가 일정 시간 후 자동으로 사라진다   | 토스트 표시           | 3초 후 토스트 사라짐 (확인 필요) | 토스트가 DOM에서 제거되거나 hidden 상태가 됨 | 통합        |

## 5. 테스트 데이터

### 반복 일정 샘플 (수정 전)

```json
{
  "id": "recurring-1",
  "title": "매일 회의",
  "date": "2024-01-15",
  "isRecurring": true,
  "recurringGroup": "group-1",
  "repeat": {
    "type": "daily"
  }
}
```

### 단일 수정 후 예상 결과

```json
{
  "id": "recurring-1",
  "title": "수정된 회의",
  "date": "2024-01-15",
  "isRecurring": false,
  "repeat": null
}
```

### 전체 수정 후 예상 결과

```json
{
  "id": "recurring-1",
  "title": "전체 수정된 회의",
  "date": "2024-01-15",
  "isRecurring": true,
  "recurringGroup": "group-1",
  "repeat": {
    "type": "daily"
  }
}
```

## 6. 비고

### 확인 필요 사항

1. **TC-4-11**: 전체 수정 시 반복 유형(매일→매주) 변경 가능 여부 확인 필요
2. **TC-4-14**: 토스트 메시지 자동 닫힘 시간 확인 필요
3. **수정 폼 데이터**: 수정 아이콘 클릭 시 기존 데이터가 폼에 자동으로 채워지는지 확인 필요
4. **반복 그룹 식별**: 같은 반복 그룹의 일정을 식별하는 방법 (ID, 그룹 ID 등) 확인 필요
5. **다이얼로그 취소**: 다이얼로그에서 취소 또는 닫기 동작 시 처리 방식 확인 필요

### 테스트 우선순위

- P0: TC-4-6, TC-4-7, TC-4-9, TC-4-10 (핵심 수정 기능)
- P1: TC-4-1, TC-4-4, TC-4-5, TC-4-12 (UI 상호작용 및 피드백)
- P2: TC-4-8, TC-4-13 (부가 검증)
- P3: TC-4-2, TC-4-3, TC-4-14 (UI 세부 사항)
