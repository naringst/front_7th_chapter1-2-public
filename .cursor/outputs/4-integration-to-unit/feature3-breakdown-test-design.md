# Feature 3: ë°˜ë³µ ì¼ì • ì¢…ë£Œ ì¡°ê±´ - Unit Test Candidates

## ë¶„ì„ ëŒ€ìƒ
- Integration Test: `src/__tests__/integration/feature3-integration.spec.tsx`
- Test Design: `.cursor/outputs/3-integration-test-design/feature3-test-design.md`

---

## ìœ ë‹› í…ŒìŠ¤íŠ¸ í›„ë³´ ì‹ë³„ ê²°ê³¼

### âœ… í›„ë³´ 1: ì¢…ë£Œ ë‚ ì§œ ê²€ì¦ í•¨ìˆ˜ (`validateRepeatEndDate`)

**ì‹ë³„ ê·¼ê±°:**
- TC-3-2-1ì—ì„œ "ì¢…ë£Œ ë‚ ì§œê°€ ì‹œì‘ ë‚ ì§œë³´ë‹¤ ì´ì „ì´ë©´ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ" ê²€ì¦
- ì´ëŠ” ìˆœìˆ˜í•œ ë‚ ì§œ ë¹„êµ ë¡œì§ìœ¼ë¡œ, ìœ ë‹› í…ŒìŠ¤íŠ¸ë¡œ ë¶„ë¦¬ ê°€ëŠ¥

**í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ (ì˜ˆìƒ):**
```typescript
function validateRepeatEndDate(
  startDate: string,
  endDate: string | undefined
): { valid: boolean; error?: string }
```

**ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:**
1. ì¢…ë£Œ ë‚ ì§œê°€ ì‹œì‘ ë‚ ì§œë³´ë‹¤ ì´ì „ â†’ `{ valid: false, error: "ì¢…ë£Œ ë‚ ì§œëŠ” ì‹œì‘ ë‚ ì§œ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤" }`
2. ì¢…ë£Œ ë‚ ì§œê°€ ì‹œì‘ ë‚ ì§œì™€ ê°™ìŒ â†’ `{ valid: true }`
3. ì¢…ë£Œ ë‚ ì§œê°€ ì‹œì‘ ë‚ ì§œë³´ë‹¤ ì´í›„ â†’ `{ valid: true }`
4. ì¢…ë£Œ ë‚ ì§œê°€ undefined â†’ `{ valid: true }` (ê¸°ë³¸ê°’ ì ìš©)
5. ì¢…ë£Œ ë‚ ì§œê°€ 2025-12-31 ì´ˆê³¼ â†’ `{ valid: true }` (ìë™ ì œí•œ, ê²½ê³  ì—†ìŒ)
6. ì˜ëª»ëœ ë‚ ì§œ í˜•ì‹ â†’ `{ valid: false, error: "..." }`

---

### âœ… í›„ë³´ 2: ì¢…ë£Œ ë‚ ì§œ ê¸°ë³¸ê°’ ì ìš© í•¨ìˆ˜ (`getRepeatEndDate`)

**ì‹ë³„ ê·¼ê±°:**
- TC-3-1-4ì—ì„œ "ì¢…ë£Œ ë‚ ì§œ ë¯¸ì…ë ¥ ì‹œ ê¸°ë³¸ê°’(2025-12-31)ê¹Œì§€ ìƒì„±" ê²€ì¦
- TC-3-2-3ì—ì„œ "ì¢…ë£Œ ë‚ ì§œê°€ 2025-12-31 ì´ˆê³¼ ì‹œ 2025-12-31ê¹Œì§€ë§Œ ìƒì„±" ê²€ì¦
- ì´ëŠ” ìˆœìˆ˜í•œ ë‚ ì§œ ì²˜ë¦¬ ë¡œì§

**í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ (ì˜ˆìƒ):**
```typescript
function getRepeatEndDate(
  endDate: string | undefined
): string
```

**ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:**
1. `endDate === undefined` â†’ `"2025-12-31"`
2. `endDate === null` â†’ `"2025-12-31"`
3. `endDate === ""` â†’ `"2025-12-31"`
4. `endDate === "2025-10-31"` â†’ `"2025-10-31"` (ê·¸ëŒ€ë¡œ ë°˜í™˜)
5. `endDate === "2025-12-31"` â†’ `"2025-12-31"` (ê²½ê³„ê°’)
6. `endDate === "2026-01-01"` â†’ `"2025-12-31"` (ìµœëŒ€ê°’ ì œí•œ)
7. `endDate === "2027-12-31"` â†’ `"2025-12-31"` (ìµœëŒ€ê°’ ì œí•œ)
8. `endDate === "2024-12-31"` â†’ `"2024-12-31"` (ê³¼ê±° ë‚ ì§œëŠ” í—ˆìš©, ì‹œì‘ ë‚ ì§œ ê²€ì¦ì€ ë³„ë„)

---

### âœ… í›„ë³´ 3: ì¢…ë£Œ ë‚ ì§œê¹Œì§€ ë°˜ë³µ ì¼ì • ìƒì„± í•¨ìˆ˜ (`generateRecurringEventsUntilEndDate`)

**ì‹ë³„ ê·¼ê±°:**
- TC-3-1-3, TC-3-2-2, TC-3-2-3ì—ì„œ ì¢…ë£Œ ë‚ ì§œì— ë”°ë¥¸ ìƒì„± ê°œìˆ˜ ê²€ì¦
- ê¸°ì¡´ `generateRecurringEvents` í™•ì¥ ë˜ëŠ” ìˆ˜ì •

**í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ (ì˜ˆìƒ):**
```typescript
function generateRecurringEventsUntilEndDate(
  baseEvent: Event | EventForm,
  endDate: string
): Event[]
```

**ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:**
1. ë§¤ì¼ ë°˜ë³µ, 10/1~10/5 â†’ 5ê°œ ìƒì„±
2. ë§¤ì¼ ë°˜ë³µ, 10/1~10/10 â†’ 10ê°œ ìƒì„±, 10/11ì€ ì—†ìŒ
3. ë§¤ì£¼ ë°˜ë³µ, 10/1~10/31 â†’ 5ê°œ ìƒì„±
4. ë§¤ì›” ë°˜ë³µ, 10/1~12/31 â†’ 3ê°œ ìƒì„±
5. ì—°ê°„ ë°˜ë³µ, 10/1~2025-12-31 â†’ 1ê°œ ìƒì„±
6. ì¢…ë£Œ ë‚ ì§œ = ì‹œì‘ ë‚ ì§œ â†’ 1ê°œ ìƒì„±
7. ì¢…ë£Œ ë‚ ì§œê°€ ì²« ë°˜ë³µ ì „ â†’ 1ê°œ ìƒì„± (ì‹œì‘ì¼ë§Œ)

---

## âŒ ìœ ë‹› í…ŒìŠ¤íŠ¸ í›„ë³´ì—ì„œ ì œì™¸ëœ í•­ëª©

### 1. UI í‘œì‹œ ë¡œì§
- TC-3-1-1 (ì¢…ë£Œ ë‚ ì§œ í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€)
- TC-3-3-3 (ì¼ì • ëª©ë¡ì—ì„œ ì¢…ë£Œ ë‚ ì§œ í‘œì‹œ)
- **ì œì™¸ ì´ìœ **: UI ë Œë”ë§ ë¡œì§ì€ í†µí•© í…ŒìŠ¤íŠ¸ë¡œë§Œ ê²€ì¦

### 2. ì´ë²¤íŠ¸ ìˆ˜ì • ë¡œì§
- TC-3-3-1, TC-3-3-2 (ì¢…ë£Œ ë‚ ì§œ ìˆ˜ì •)
- **ì œì™¸ ì´ìœ **: API í˜¸ì¶œê³¼ ìƒíƒœ ê´€ë¦¬ê°€ í¬í•¨ë˜ì–´ í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ì¶©ë¶„

### 3. API í˜¸ì¶œ ë¡œì§
- MSWë¥¼ ì‚¬ìš©í•œ POST /api/events-list í˜¸ì¶œ
- **ì œì™¸ ì´ìœ **: useEventOperations í›… ë‚´ë¶€ ë¡œì§, í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ì¶©ë¶„

---

## ğŸ“Š ìš”ì•½

| í›„ë³´ í•¨ìˆ˜ | íŒŒì¼ ìœ„ì¹˜ (ì˜ˆìƒ) | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜ | ìš°ì„ ìˆœìœ„ |
|-----------|------------------|------------------|----------|
| `validateRepeatEndDate` | `src/utils/repeatValidation.ts` | 6 | High |
| `getRepeatEndDate` | `src/utils/repeatDateUtils.ts` | 8 | High |
| `generateRecurringEventsUntilEndDate` | `src/utils/repeatScheduler.ts` | 7 | Medium |

**ì´ 3ê°œ í•¨ìˆ˜, 21ê°œ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„: Stage 5 (Unit Test Design)

ìœ ë‹› í…ŒìŠ¤íŠ¸ í›„ë³´ 3ê°œì— ëŒ€í•œ ìƒì„¸í•œ í…ŒìŠ¤íŠ¸ ì„¤ê³„ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:
1. `validateRepeatEndDate` â†’ ë‚ ì§œ ê²€ì¦ ë¡œì§
2. `getRepeatEndDate` â†’ ê¸°ë³¸ê°’ ë° ìµœëŒ€ê°’ ì²˜ë¦¬
3. `generateRecurringEventsUntilEndDate` â†’ ì¢…ë£Œ ë‚ ì§œê¹Œì§€ ë°˜ë³µ ìƒì„±

---

**ì‘ì„±ì¼**: 2025-10-30  
**ìœ ë‹› í…ŒìŠ¤íŠ¸ í›„ë³´**: 3ê°œ  
**ì˜ˆìƒ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**: 21ê°œ

