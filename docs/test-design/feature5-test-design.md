# 🧪 테스트 설계서 - FEATURE5: 반복 일정 삭제

## 1. 테스트 목적

반복 일정 삭제 기능이 올바르게 동작하는지 검증한다. 사용자가 반복 일정의 삭제 아이콘을 클릭했을 때 삭제 옵션 다이얼로그가 표시되고, '예'(단일 삭제) 또는 '아니오'(전체 삭제)를 선택하여 각각 다르게 동작하는지 확인한다. 단일 삭제 시에는 해당 일정만 삭제되고, 전체 삭제 시에는 모든 반복 일정이 삭제되어야 하며, 삭제된 일정은 복구할 수 없음을 검증한다.

## 2. 테스트 범위

### 포함

- 반복 일정 삭제 아이콘 클릭 시 다이얼로그 표시
- 삭제 옵션 다이얼로그에서 '예'/'아니오' 선택
- 단일 삭제 모드: 해당 일정만 삭제
- 전체 삭제 모드: 모든 반복 일정 삭제
- 삭제 완료 후 토스트 메시지 표시
- 삭제 완료 후 캘린더에서 제거
- 삭제된 일정 복구 불가

### 제외

- 일반 일정 삭제 (반복이 아닌 일정)
- 반복 일정 생성 로직 (FEATURE1에서 다룸)
- 반복 일정 수정 (FEATURE4에서 다룸)
- 삭제 취소(Undo) 기능 (명세에 없음)

## 3. 테스트 분류

| 구분        | 설명                                   |
| ----------- | -------------------------------------- |
| 통합 테스트 | 삭제 UI, 다이얼로그, 삭제 로직 간 검증 |

## 4. 테스트 시나리오

### Story 1: 반복 일정 삭제 시작

| 시나리오 ID | 설명                                                   | 입력                         | 기대 결과                 | 검증 포인트                         | 테스트 유형 |
| ----------- | ------------------------------------------------------ | ---------------------------- | ------------------------- | ----------------------------------- | ----------- |
| TC-5-1      | 반복 일정 삭제 아이콘 클릭 시 다이얼로그가 표시된다    | 반복 일정 삭제 아이콘 클릭   | 삭제 옵션 다이얼로그 표시 | 다이얼로그가 DOM에 존재하고 visible | 통합        |
| TC-5-2      | 다이얼로그에 '해당 일정만 삭제하시겠어요?' 텍스트 표시 | 다이얼로그 열림              | 안내 텍스트 표시          | 다이얼로그 내 해당 텍스트가 존재    | 통합        |
| TC-5-3      | 다이얼로그에 '예'와 '아니오' 버튼이 표시된다           | 다이얼로그 열림              | 두 개의 버튼 표시         | '예', '아니오' 버튼이 모두 존재     | 통합        |
| TC-5-4      | '예' 선택 시 단일 삭제 모드가 활성화된다               | 다이얼로그에서 '예' 클릭     | 단일 삭제 모드 활성화     | 삭제 모드가 'single'로 설정됨       | 통합        |
| TC-5-5      | '아니오' 선택 시 전체 삭제 모드가 활성화된다           | 다이얼로그에서 '아니오' 클릭 | 전체 삭제 모드 활성화     | 삭제 모드가 'all'로 설정됨          | 통합        |

### Story 2: 반복 일정 삭제 실행

| 시나리오 ID | 설명                                               | 입력                           | 기대 결과                         | 검증 포인트                                         | 테스트 유형 |
| ----------- | -------------------------------------------------- | ------------------------------ | --------------------------------- | --------------------------------------------------- | ----------- |
| TC-5-6      | 단일 삭제 완료 시 해당 일정만 삭제된다             | 단일 모드, '예' 클릭           | 해당 날짜의 일정만 삭제됨         | 특정 날짜 일정만 제거되고 다른 반복 일정은 유지됨   | 통합        |
| TC-5-7      | 단일 삭제 완료 시 다른 반복 일정은 영향받지 않는다 | 단일 모드, '예' 클릭           | 다른 날짜 반복 일정은 유지됨      | 다른 날짜의 일정은 여전히 존재하고 반복 아이콘 유지 | 통합        |
| TC-5-8      | 전체 삭제 완료 시 모든 반복 일정이 삭제된다        | 전체 모드, '아니오' 클릭       | 같은 그룹의 모든 반복 일정 삭제됨 | 같은 반복 그룹의 모든 일정이 캘린더에서 제거됨      | 통합        |
| TC-5-9      | 삭제된 일정은 복구할 수 없다                       | 일정 삭제 후 복구 시도         | 복구 불가                         | 삭제된 일정이 데이터에서 완전히 제거됨              | 통합        |
| TC-5-10     | 전체 삭제 시 과거 일정도 함께 삭제된다 (확인 필요) | 전체 모드, 과거 일정 포함 삭제 | 확인 필요                         | 확인 필요: 과거 반복 일정도 삭제 대상인지 확인 필요 | 통합        |
| TC-5-11     | 전체 삭제 시 미래 일정만 삭제된다 (확인 필요)      | 전체 모드, 미래 일정만 삭제    | 확인 필요                         | 확인 필요: 과거 일정은 유지하고 미래만 삭제하는지   | 통합        |

### Story 3: 삭제 완료 피드백

| 시나리오 ID | 설명                                             | 입력                  | 기대 결과                        | 검증 포인트                                  | 테스트 유형 |
| ----------- | ------------------------------------------------ | --------------------- | -------------------------------- | -------------------------------------------- | ----------- |
| TC-5-12     | 삭제 완료 시 '일정이 삭제되었습니다' 토스트 표시 | 삭제 완료 (단일/전체) | 토스트 메시지 표시               | '일정이 삭제되었습니다' 텍스트가 표시됨      | 통합        |
| TC-5-13     | 삭제 완료 시 캘린더에서 일정이 즉시 사라진다     | 삭제 완료 (단일/전체) | 캘린더에서 일정 제거             | 삭제된 일정이 캘린더 뷰에서 보이지 않음      | 통합        |
| TC-5-14     | 토스트 메시지가 일정 시간 후 자동으로 사라진다   | 토스트 표시           | 3초 후 토스트 사라짐 (확인 필요) | 토스트가 DOM에서 제거되거나 hidden 상태가 됨 | 통합        |

## 5. 테스트 데이터

### 반복 일정 샘플 (삭제 전)

```json
[
  {
    "id": "recurring-1",
    "title": "매일 회의",
    "date": "2024-01-15",
    "isRecurring": true,
    "recurringGroup": "group-1"
  },
  {
    "id": "recurring-2",
    "title": "매일 회의",
    "date": "2024-01-16",
    "isRecurring": true,
    "recurringGroup": "group-1"
  },
  {
    "id": "recurring-3",
    "title": "매일 회의",
    "date": "2024-01-17",
    "isRecurring": true,
    "recurringGroup": "group-1"
  }
]
```

### 단일 삭제 후 예상 결과 (recurring-1 삭제)

```json
[
  {
    "id": "recurring-2",
    "title": "매일 회의",
    "date": "2024-01-16",
    "isRecurring": true,
    "recurringGroup": "group-1"
  },
  {
    "id": "recurring-3",
    "title": "매일 회의",
    "date": "2024-01-17",
    "isRecurring": true,
    "recurringGroup": "group-1"
  }
]
```

### 전체 삭제 후 예상 결과 (group-1 전체 삭제)

```json
[]
```

## 6. 비고

### 확인 필요 사항

1. **TC-5-10, TC-5-11**: 전체 삭제 시 과거 일정 처리 방식 확인 필요
   - 옵션 A: 과거와 미래 모든 일정 삭제
   - 옵션 B: 미래 일정만 삭제, 과거는 유지
   - 옵션 C: 현재 일정 기준으로 이후 일정만 삭제
2. **TC-5-14**: 토스트 메시지 자동 닫힘 시간 확인 필요
3. **다이얼로그 취소**: 다이얼로그에서 취소 또는 닫기 동작 시 처리 방식 확인 필요
4. **삭제 확인 추가**: 전체 삭제 시 추가 확인 단계가 필요한지 확인 필요 (실수 방지)
5. **반복 그룹 식별**: 같은 반복 그룹의 일정을 식별하는 방법 확인 필요

### 테스트 우선순위

- P0: TC-5-6, TC-5-8, TC-5-9 (핵심 삭제 기능)
- P1: TC-5-1, TC-5-4, TC-5-5, TC-5-12 (UI 상호작용 및 피드백)
- P2: TC-5-7, TC-5-13 (부가 검증)
- P3: TC-5-2, TC-5-3, TC-5-14 (UI 세부 사항)

### 주의 사항

- 삭제는 복구 불가능한 작업이므로 테스트 시 백업 데이터 준비 필요
- 전체 삭제 시 많은 일정이 한 번에 삭제될 수 있으므로 성능 테스트 필요
- 실수로 삭제하는 것을 방지하기 위한 UX 개선 고려 필요
