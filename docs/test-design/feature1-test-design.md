# 🧪 테스트 설계서 - FEATURE1: 반복 유형 선택

## 1. 테스트 목적

반복 일정 생성 기능이 올바르게 동작하는지 검증한다. 사용자가 반복 설정 체크박스를 통해 반복 옵션을 활성화하고, 드롭다운에서 반복 유형(매일, 매주, 매월, 매년)을 선택하여 저장 시 반복 일정이 정상적으로 생성되는지 확인한다. 특히 매월 반복 시 31일과 같이 특정 월에 존재하지 않는 날짜, 윤년 29일의 매년 반복 등 예외 상황에서도 올바르게 동작하는지 검증한다.

## 2. 테스트 범위

### 포함

- 반복 설정 체크박스 활성화/비활성화 동작
- 반복 드롭다운 표시/숨김 동작
- 반복 유형 선택 기능 (매일, 매주, 매월, 매년)
- 반복 일정 생성 기능
- 매월 반복 시 해당 날짜가 없는 월의 예외 처리
- 윤년 29일 매년 반복 시 평년의 예외 처리

### 제외

- 반복 종료 조건 설정 기능 (FEATURE3에서 다룸)
- 반복 일정 표시 기능 (FEATURE2에서 다룸)
- 반복 일정 수정 기능 (FEATURE4에서 다룸)
- 반복 일정 삭제 기능 (FEATURE5에서 다룸)

## 3. 테스트 분류

| 구분        | 설명                                                    |
| ----------- | ------------------------------------------------------- |
| 단위 테스트 | 반복 설정 관련 유틸 함수 검증                           |
| 통합 테스트 | 반복 설정 UI 컴포넌트와 일정 생성 로직 간 상호작용 검증 |

## 4. 테스트 시나리오

### Story 1: 반복 설정 활성화

| 시나리오 ID | 설명                                                | 입력                             | 기대 결과                     | 검증 포인트                            | 테스트 유형 |
| ----------- | --------------------------------------------------- | -------------------------------- | ----------------------------- | -------------------------------------- | ----------- |
| TC-1-1      | 반복 설정 체크박스 클릭 시 반복 드롭다운이 표시된다 | 반복 설정 체크박스 클릭          | 반복 드롭다운이 화면에 표시됨 | 드롭다운 요소가 DOM에 존재하고 visible | 통합        |
| TC-1-2      | 반복 설정 체크박스 해제 시 반복 드롭다운이 숨겨진다 | 반복 설정 체크박스 해제          | 반복 드롭다운이 화면에서 숨김 | 드롭다운 요소가 hidden 또는 제거됨     | 통합        |
| TC-1-3      | 반복 설정 토글 동작이 정상적으로 작동한다           | 체크박스 클릭 → 해제 → 다시 클릭 | 드롭다운 표시/숨김 반복       | 각 클릭마다 표시 상태가 올바르게 변경  | 통합        |

### Story 2: 반복 유형 선택

| 시나리오 ID | 설명                                        | 입력                     | 기대 결과                   | 검증 포인트                        | 테스트 유형 |
| ----------- | ------------------------------------------- | ------------------------ | --------------------------- | ---------------------------------- | ----------- |
| TC-2-1      | 매일 반복 선택 시 매일 반복 설정이 적용된다 | 드롭다운에서 "매일" 선택 | 반복 유형이 "매일"로 설정됨 | state 또는 form value = "daily"    | 통합        |
| TC-2-2      | 매주 반복 선택 시 매주 반복 설정이 적용된다 | 드롭다운에서 "매주" 선택 | 반복 유형이 "매주"로 설정됨 | state 또는 form value = "weekly"   | 통합        |
| TC-2-3      | 매월 반복 선택 시 매월 반복 설정이 적용된다 | 드롭다운에서 "매월" 선택 | 반복 유형이 "매월"로 설정됨 | state 또는 form value = "monthly"  | 통합        |
| TC-2-4      | 매년 반복 선택 시 매년 반복 설정이 적용된다 | 드롭다운에서 "매년" 선택 | 반복 유형이 "매년"로 설정됨 | state 또는 form value = "yearly"   | 통합        |
| TC-2-5      | 드롭다운에 모든 반복 옵션이 표시된다        | 드롭다운 열기            | 4개 옵션 모두 표시됨        | 매일, 매주, 매월, 매년 옵션이 존재 | 통합        |

### Story 3: 반복 일정 생성

| 시나리오 ID | 설명                                             | 입력                                 | 기대 결과                          | 검증 포인트                               | 테스트 유형 |
| ----------- | ------------------------------------------------ | ------------------------------------ | ---------------------------------- | ----------------------------------------- | ----------- |
| TC-3-1      | 매일 반복 일정이 정상적으로 생성된다             | 반복: 매일, 저장 버튼 클릭           | 매일 반복 일정이 생성됨            | 생성된 일정 배열에 매일 날짜가 포함됨     | 통합        |
| TC-3-2      | 매주 반복 일정이 정상적으로 생성된다             | 반복: 매주, 저장 버튼 클릭           | 매주 반복 일정이 생성됨            | 생성된 일정 배열에 매주 날짜가 포함됨     | 통합        |
| TC-3-3      | 매월 반복 일정이 정상적으로 생성된다             | 반복: 매월, 시작일: 15일, 저장       | 매월 15일에 반복 일정이 생성됨     | 생성된 일정 배열의 모든 날짜가 15일임     | 통합        |
| TC-3-4      | 매년 반복 일정이 정상적으로 생성된다             | 반복: 매년, 시작일: 3월 15일, 저장   | 매년 3월 15일에 반복 일정이 생성됨 | 생성된 일정 배열의 모든 날짜가 3월 15일임 | 통합        |
| TC-3-5      | 31일 매월 반복 시 2월에는 생성되지 않는다 (예외) | 반복: 매월, 시작일: 1월 31일, 저장   | 2월 제외, 31일 있는 월에만 생성됨  | 생성된 일정 배열에 2월 날짜가 없음        | 통합        |
| TC-3-6      | 31일 매월 반복 시 30일까지 있는 월에는 생성 안됨 | 반복: 매월, 시작일: 1월 31일, 저장   | 4월, 6월, 9월, 11월에 생성 안됨    | 생성된 일정 배열에 해당 월 날짜가 없음    | 통합        |
| TC-3-7      | 윤년 29일 매년 반복 시 평년에는 생성 안됨 (예외) | 반복: 매년, 시작일: 2024-02-29, 저장 | 2025, 2026, 2027년에 생성 안됨     | 생성된 일정 배열에 평년 2월 29일이 없음   | 통합        |
| TC-3-8      | 윤년 29일 매년 반복 시 다음 윤년에는 생성됨      | 반복: 매년, 시작일: 2024-02-29, 저장 | 2028년 2월 29일에 생성됨           | 생성된 일정 배열에 2028-02-29가 포함됨    | 통합        |

## 5. 단위 테스트 시나리오

| 시나리오 ID | 함수/모듈                    | 입력               | 기대 출력 | 검증 포인트              | 테스트 유형 |
| ----------- | ---------------------------- | ------------------ | --------- | ------------------------ | ----------- |
| UT-1        | isLeapYear(year)             | 2024               | true      | 윤년 판별 로직           | 단위        |
| UT-2        | isLeapYear(year)             | 2025               | false     | 평년 판별 로직           | 단위        |
| UT-3        | getLastDayOfMonth(year, mon) | 2024, 2            | 29        | 윤년 2월 마지막 날       | 단위        |
| UT-4        | getLastDayOfMonth(year, mon) | 2025, 2            | 28        | 평년 2월 마지막 날       | 단위        |
| UT-5        | isValidDateInMonth(y, m, d)  | 2025, 2, 29        | false     | 존재하지 않는 날짜 검증  | 단위        |
| UT-6        | isValidDateInMonth(y, m, d)  | 2024, 2, 29        | true      | 존재하는 날짜 검증       | 단위        |
| UT-7        | generateRecurringEvents()    | type: 'daily'      | 매일 배열 | 매일 반복 일정 생성 로직 | 단위        |
| UT-8        | generateRecurringEvents()    | type: 'monthly', d | 31일 배열 | 31일 존재하는 월만 포함  | 단위        |

## 6. 테스트 데이터

- 테스트용 시작 날짜: 2024-01-01
- 윤년 테스트: 2024-02-29
- 31일 테스트: 1월 31일, 3월 31일, 5월 31일, 7월 31일, 8월 31일, 10월 31일, 12월 31일
- 30일까지 있는 월: 4월, 6월, 9월, 11월
- 28/29일까지 있는 월: 2월

## 7. 비고

### 확인 필요 사항

1. 반복 설정 체크했으나 반복 유형 미선택 시 동작: 에러 처리 또는 기본값 적용 방식 확인 필요
2. 반복 일정 생성 시 최대 개수 제한 확인 필요

### 테스트 우선순위

- P0: TC-3-1 ~ TC-3-4, TC-3-5, TC-3-7 (핵심 기능)
- P1: TC-1-1, TC-1-2, TC-2-1 ~ TC-2-4 (UI 상호작용)
- P2: TC-3-6, TC-3-8 (추가 예외)
- P3: TC-1-3, TC-2-5 (엣지 케이스)
